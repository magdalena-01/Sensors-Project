@{
    ViewData["Title"] = "Dashboard @2024";
}

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

<style>
  html, body {
    height: 100%;
    margin: 0;
    width: 100%;
    background-color: #f4f7fc; /* Light, soft background for a fresh look */
    font-family: 'Poppins', sans-serif; /* Modern sans-serif font */
}

body {
    display: flex;
    flex-direction: column;
    color: #333;
}

/* Modern Container */
.container-fluid {
    flex: 1;
    padding: 30px;
    background-color: #f4f7fc;
}

.row {
    margin: 0;
}

/* Modern Sidebar styling */
.sidebar {
    background-color: #ffffff; /* Clean white */
    color: #333;
    height: 100vh;
    padding: 0;
    position: sticky;
    top: 0;
    z-index: 100;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); /* Soft shadow for floating effect */
    border-right: 1px solid #e0e0e0;
}

.sidebar .nav-link {
    color: #333;
    font-size: 16px;
    padding: 15px;
    margin: 5px 0;
    border-radius: 8px; /* Rounded links for modern feel */
    transition: background-color 0.3s ease, color 0.3s ease;
}

.sidebar .nav-link:hover, .sidebar .nav-link.active {
    background-color: #007bff; /* Branded blue color for highlights */
    color: #fff;
    box-shadow: 0 2px 10px rgba(0, 123, 255, 0.2); /* Subtle hover shadow */
}

/* Modern Card Styling */
.card {
    border-radius: 16px; /* More rounded corners */
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1); /* Softer shadow for depth */
    border: none;
    transition: transform 0.2s ease; /* Subtle hover effect */
}

.card:hover {
    transform: translateY(-5px); /* Lift on hover */
}

.card-header {
    background-color: #007bff;
    color: white;
    font-weight: bold;
    border-radius: 16px 16px 0 0; /* Rounded top corners */
}

/* Chart Container Styling */
.chart-container {
    background-color: white;
    padding: 20px;
    border-radius: 16px; /* Rounded corners */
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05); /* Soft shadow */
    transition: transform 0.2s ease; /* Subtle hover effect */
}

.chart-container:hover {
    transform: translateY(-5px);
}

/* Data Table Styling */
.table th {
    background-color: #007bff;
    color: white;
    text-align: center;
    border: none;
    padding: 12px;
    font-weight: 600;
}

.table td {
    text-align: center;
    padding: 12px;
    border: none;
    font-weight: 400;
}

/* Main content padding and structure */
.main-content {
    padding: 0 2rem;
}

h5, h3, span, small {
    font-family: 'Poppins', sans-serif; /* Modern font everywhere */
}

/* Button Styling */
button {
    background-color: #007bff;
    color: #fff;
    border-radius: 8px;
    padding: 10px 20px;
    border: none;
    transition: background-color 0.3s ease, box-shadow 0.3s ease;
}

button:hover {
    background-color: #0056b3;
    box-shadow: 0 4px 10px rgba(0, 91, 187, 0.3);
}



    .main-content {
        padding: 1rem;
    }
}
    /* User Info Styling */
    .user-info {
        margin-right: 20px; /* Adjust for proper alignment to the right */
        padding: 10px 20px;
        background-color: #f4f7fc;
        border-radius: 10px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05); /* Soft shadow for smooth floating effect */
    }

    .user-email {
        font-size: 16px;
        color: #555; /* Subtle, modern gray color for the email */
        font-weight: 500;
        margin-right: 10px;
    }

    /* Logout Button */
    .btn-logout {
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 20px; /* Rounded button for a modern look */
        padding: 8px 20px;
        font-size: 16px;
        font-weight: 600;
        transition: background-color 0.3s ease, box-shadow 0.3s ease;
    }

        .btn-logout:hover {
            background-color: #0056b3;
            box-shadow: 0 4px 12px rgba(0, 123, 255, 0.3); /* Smooth hover shadow */
            cursor: pointer;
        }

    /* Flex alignment */
    .d-flex {
        display: flex;
    }

    .justify-content-end {
        justify-content: flex-end;
    }

    .align-items-center {
        align-items: center;
    }

    .me-3 {
        margin-right: 1rem;
    }


</style>

@if (User.Identity.IsAuthenticated)
{
    <header>
        <nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom box-shadow mb-3">
            <div class="container">
                <a class="navbar-brand" href="#">My Dashboard</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
                        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">

                    <ul class="navbar-nav ms-auto">
                        <!-- User-related items -->
                        <li class="nav-item">
                            <partial name="_LoginPartial" />
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>
    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-md-3 col-lg-2 d-md-block sidebar collapse" id="sidebarMenu">
                <div class="position-sticky">
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="Home">
                                <i class="fas fa-home"></i> Home
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" asp-controller="Sensors">
                                <i class="fas fa-cogs"></i> Sensors
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" asp-controller="Pumps">
                                <i class="fas fa-pump-soap"></i> Pumps
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" asp-controller="Home" asp-action="OnOff">On/Off Control</a>
                        </li>
                    </ul>
                </div>
            </div>
            <!-- End Sidebar -->
            <!-- Main content -->
            <div class="col-md-9 ms-sm-auto col-lg-10 main-content">
                <!-- Cards Section -->
                <div class="row">
                    <div class="col-lg-4 col-md-4 col-6 mb-4">
                        <div class="card">
                            <div class="card-body">
                                <div class="card-title d-flex align-items-start justify-content-between">
                                    <div class="avatar flex-shrink-0">
                                        <i class="fas fa-thermometer-half fa-2x" style="color: #007bff;"></i>
                                    </div>
                                </div>
                                <span class="fw-medium d-block mb-1">Temperature</span>
                                <h3 class="card-title mb-2">30&#xb0;</h3>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-4 col-md-4 col-6 mb-4">
                        <div class="card">
                            <div class="card-body">
                                <div class="card-title d-flex align-items-start justify-content-between">
                                    <div class="avatar flex-shrink-0">
                                        <i class="fas fa-tint fa-2x" style="color: #32cd32;"></i>
                                    </div>
                                </div>
                                <span class="fw-medium d-block mb-1">Soil Moisture</span>
                                <h3 class="card-title mb-2">45%</h3>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-4 col-md-4 col-6 mb-4">
                        <div class="card">
                            <div class="card-body">
                                <div class="card-title d-flex align-items-start justify-content-between">
                                    <div class="avatar flex-shrink-0">
                                        <i class="fas fa-water fa-2x" style="color: #1e90ff;"></i>
                                    </div>
                                </div>
                                <span class="fw-medium d-block mb-1">Water Usage</span>
                                <h3 class="card-title mb-2">3,000L</h3>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Chart Section -->
                <div class="row">
                    <div class="col-12 mb-4">
                        <div class="card">
                            <div class="card-header d-flex align-items-center justify-content-between">
                                <h5 class="mb-0">Usage Summary</h5>
                                <small class="float-end">7 Days</small>
                            </div>
                            <div class="card-body">
                                <div class="chart-container">
                                    <canvas id="chart" style="max-height: 500px;"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Data Grid Section -->
                <div class="row">
                    <div class="col-12 mb-4">
                        <div class="card">
                            <div class="card-header d-flex align-items-center justify-content-between">
                                <h5 class="mb-0">Data Grid</h5>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th>Day</th>
                                                <th>Temperature (°C)</th>
                                                <th>Soil Moisture (%)</th>
                                                <th>Water Usage (L)</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Sunday</td>
                                                <td>30</td>
                                                <td>45</td>
                                                <td>3,000</td>
                                            </tr>
                                            <tr>
                                                <td>Monday</td>
                                                <td>28</td>
                                                <td>40</td>
                                                <td>2,800</td>
                                            </tr>
                                            <tr>
                                                <td>Tuesday</td>
                                                <td>32</td>
                                                <td>42</td>
                                                <td>3,200</td>
                                            </tr>
                                            <tr>
                                                <td>Wednesday</td>
                                                <td>29</td>
                                                <td>48</td>
                                                <td>2,900</td>
                                            </tr>
                                            <tr>
                                                <td>Thursday</td>
                                                <td>31</td>
                                                <td>50</td>
                                                <td>3,100</td>
                                            </tr>
                                            <tr>
                                                <td>Friday</td>
                                                <td>30</td>
                                                <td>47</td>
                                                <td>3,000</td>
                                            </tr>
                                            <tr>
                                                <td>Saturday</td>
                                                <td>33</td>
                                                <td>46</td>
                                                <td>3,300</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- End Main Content -->
        </div>
    </div>
}

<script>
    document.addEventListener('DOMContentLoaded', function () {
        var ctx = document.getElementById('chart').getContext('2d');
        var myChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],
                datasets: [
                    {
                        label: 'Temperature (°C)',
                        data: [30, 28, 32, 29, 31, 30, 33],
                        backgroundColor: 'rgba(39, 42, 255, 0.5)', // Deep Sky Blue
                        borderColor: 'rgba(39, 42, 255, 1)', // Deep Sky Blue
                        borderWidth: 1
                    },
                    {
                        label: 'Soil Moisture (%)',
                        data: [45, 40, 42, 48, 50, 47, 46],
                        backgroundColor: 'rgba(50, 205, 50, 0.5)', // Lime Green
                        borderColor: 'rgba(50, 205, 50, 1)', // Lime Green
                        borderWidth: 1
                    },
                    {
                        label: 'Water Usage (L)',
                        data: [3000, 2800, 3200, 2900, 3100, 3000, 3300],
                        backgroundColor: 'rgba(30, 144, 255, 0.5)', // Dodger Blue
                        borderColor: 'rgba(30, 144, 255, 1)', // Dodger Blue
                        borderWidth: 1
                    }
                ]
            },
            options: {
                scales: {
                    x: {
                        beginAtZero: true
                    },
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    });
</script>
